<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMA Crossover Trading Indicators</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/css/indicators.css') }}">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üöÄ EMA Crossover Trading Interface</h1>
            <p>Professional 9/21 EMA crossover indicator with trend line analysis and signal power measurement</p>
        </div>

        <!-- Status Message -->
        <div id="status-message" class="status-message" style="display: none;"></div>

        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Control Panel -->
            <div class="control-panel">
                <!-- Market & Timeframe Selection -->
                <div class="control-section">
                    <h3>üìä Market Settings</h3>
                    <div class="form-group">
                        <label for="market-select">Market:</label>
                        <select id="market-select" class="form-control">
                            <option value="BTC-USD">BTC-USD</option>
                            <option value="ETH-USD">ETH-USD</option>
                            <option value="SOL-USD">SOL-USD</option>
                            <option value="AVAX-USD">AVAX-USD</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="timeframe-select">Timeframe:</label>
                        <select id="timeframe-select" class="form-control">
                            <option value="1m">1 Minute</option>
                            <option value="1h">1 Hour</option>
                            <option value="1d">1 Day</option>
                        </select>
                    </div>
                </div>

                <!-- Create New Indicator -->
                <div class="control-section">
                    <h3>‚öôÔ∏è Create Indicator</h3>
                    <div class="form-group">
                        <label for="indicator-name">Indicator Name:</label>
                        <input type="text" id="indicator-name" class="form-control" placeholder="e.g., ema_5_15">
                    </div>
                    <div class="form-group">
                        <label for="fast-period" class="tooltip" data-tooltip="Shorter period for faster response">Fast EMA Period:</label>
                        <input type="number" id="fast-period" class="form-control" value="9" min="1" max="50">
                    </div>
                    <div class="form-group">
                        <label for="slow-period" class="tooltip" data-tooltip="Longer period for trend confirmation">Slow EMA Period:</label>
                        <input type="number" id="slow-period" class="form-control" value="21" min="1" max="200">
                    </div>
                    <button id="create-indicator-btn" class="btn btn-primary" style="width: 100%;">
                        Create Indicator
                    </button>
                </div>

                <!-- Active Indicators -->
                <div class="control-section">
                    <h3>üìà Active Indicators</h3>
                    <div class="form-group">
                        <label for="indicator-select">Selected Indicator:</label>
                        <select id="indicator-select" class="form-control">
                            <option value="ema_9_21">Default EMA 9/21</option>
                        </select>
                    </div>
                    <div id="indicator-list" class="indicator-list">
                        <!-- Indicators will be loaded here -->
                    </div>
                </div>

                <!-- Trend Line Tools -->
                <div class="control-section">
                    <h3>üìè Trend Line Tools</h3>
                    <div id="drawing-status" class="drawing-mode">
                        Drawing mode disabled
                    </div>
                    <div class="form-group">
                        <label for="trend-type">Trend Type:</label>
                        <select id="trend-type" class="form-control">
                            <option value="support">Support Line</option>
                            <option value="resistance">Resistance Line</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="trend-color">Line Color:</label>
                        <select id="trend-color" class="form-control">
                            <option value="#00ff88">Green</option>
                            <option value="#ff3366">Red</option>
                            <option value="#ffc107">Yellow</option>
                            <option value="#00d4ff">Blue</option>
                            <option value="#ff6b35">Orange</option>
                            <option value="#8e44ad">Purple</option>
                        </select>
                    </div>
                    <button id="toggle-drawing-btn" class="btn btn-primary" style="width: 100%; margin-bottom: 10px;">
                        Draw Trend Line
                    </button>
                    <button id="clear-trendlines-btn" class="btn btn-danger" style="width: 100%;">
                        Clear All Lines
                    </button>
                </div>

                <!-- Help Section -->
                <div class="control-section">
                    <h3>‚ùì How to Use</h3>
                    <div style="font-size: 0.85rem; color: #b0b8c4; line-height: 1.4;">
                        <p><strong>Signals:</strong></p>
                        <p>üü¢ <strong>Bullish:</strong> Fast EMA crosses above Slow EMA</p>
                        <p>üî¥ <strong>Bearish:</strong> Fast EMA crosses below Slow EMA</p>
                        <p><strong>Power:</strong> Signal strength based on EMA distance and volume</p>
                        <p><strong>Trend Lines:</strong> Click "Draw Trend Line", then click two points on chart</p>
                    </div>
                </div>
            </div>

            <!-- Chart Container -->
            <div class="chart-container">
                <!-- Signal Panel -->
                <div class="signal-panel" id="signal-panel">
                    <div class="signal-card">
                        <div class="signal-type">Waiting for data...</div>
                        <div class="signal-power">Connect to start receiving signals</div>
                    </div>
                </div>

                <!-- Trading Chart -->
                <div id="trading-chart"></div>

                <!-- Chart Legend -->
                <div style="margin-top: 15px; padding: 15px; background: #0a0e1a; border-radius: 5px; border: 1px solid #2a3f5f;">
                    <h4 style="color: #00d4ff; margin-bottom: 10px; font-size: 1rem;">Chart Legend</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 0.85rem;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 20px; height: 3px; background: #00d4ff;"></div>
                            <span>Fast EMA (9)</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 20px; height: 3px; background: #ffc107;"></div>
                            <span>Slow EMA (21)</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 10px solid #00ff88;"></div>
                            <span>Bullish Signal</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 10px solid #ff3366;"></div>
                            <span>Bearish Signal</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 20px; height: 3px; background: #00ff88;"></div>
                            <span>Support Line</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 20px; height: 3px; background: #ff3366; border-style: dashed;"></div>
                            <span>Resistance Line</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div style="text-align: center; margin-top: 30px; padding: 20px; color: #b0b8c4; font-size: 0.9rem;">
            <p>üéØ Professional EMA Crossover Trading System | Real-time signals with trend analysis</p>
            <p style="margin-top: 5px; font-size: 0.8rem;">Power calculation includes EMA distance, volume, and momentum factors</p>
        </div>
    </div>

    <script src="{{ url_for('static', path='/js/indicators.js') }}"></script>
</body>
</html>